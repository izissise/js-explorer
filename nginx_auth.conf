server {
    # Listen on http port
    listen 80;

    # Serve files listing
    location ^~ /files/ {
        # Path to serve (Trailing slash is important)
        alias /home/user/downloads/;

        # Random id so nginx doesn't serve random html files
        # that browsers would render, you can remove this line
        # if you want to directories with index.html to be rendered
        index 953b12d3-5ab2-49ad-8f49-6ea27f3a9994;

        # File listing (index) in json format
        autoindex on;
        autoindex_format json;
        autoindex_exact_size on;

        # Perf tuning
        sendfile           on;
        sendfile_max_chunk 2m;
        tcp_nopush         on;
        tcp_nodelay        on;
        keepalive_timeout  65;

        auth_basic           "Access files";
        auth_basic_user_file /basic_auth/download_htpasswd;
    }

    # Serve root html/js/css files
    location / {
        root /var/www/files/;
        # Try files makes nginx serves root files on all sub-paths
        try_files $uri $uri/ /index.html;

        # Perf tuning
        sendfile           on;
        sendfile_max_chunk 2m;
        tcp_nopush         on;
        tcp_nodelay        on;
        keepalive_timeout  65;
    }

    # Upload location

}
